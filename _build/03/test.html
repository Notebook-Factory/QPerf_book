---
interact_link: content/03/test.ipynb
kernel_name: octave
kernel_path: content/03
has_widgets: false
title: |-
  Perfusion Flow mapping
pagenum: 4
prev_page:
  url: /03/deep_learning/analysis/PerfusionSeg.html
next_page:
  url: 
suffix: .ipynb
search: 

comment: "***PROGRAMMATICALLY GENERATED, DO NOT EDIT. SEE ORIGINAL FILES IN /content***"
---

    <main class="jupyter-page">
    <div id="page-info"><div id="page-title">Perfusion Flow mapping</div>
</div>
    <div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-octave"><pre><span></span><span class="c">% example of QPerf perfusion flow mapping</span>
<span class="n">pkg</span> <span class="nb">load</span> <span class="nb">image</span>
<span class="n">clear</span> <span class="nb">all</span>
<span class="nb">close</span> <span class="nb">all</span>

<span class="c">% suppose the QPerf repo was cloned to QPerf directory</span>
<span class="c">% git clone ...</span>

<span class="c">% load the stored data</span>

<span class="c">%cd .\QPerf\examples</span>
</pre></div>

    </div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-octave"><pre><span></span><span class="nb">load</span> <span class="n">perf_data_stress</span>
</pre></div>

    </div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-octave"><pre><span></span><span class="n">working_directory</span> <span class="p">=</span> <span class="nb">pwd</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="jb_output_wrapper }}">
<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>working_directory = C:\Users\Dimitar\Downloads\octave
</pre>
</div>
</div>
</div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-octave"><pre><span></span><span class="n">working_directory</span> <span class="p">=</span><span class="nb">strrep</span><span class="p">(</span><span class="n">working_directory</span> <span class="p">,</span> <span class="s">&quot;\\&quot;</span><span class="p">,</span> <span class="s">&quot;/&quot;</span><span class="p">);</span>
</pre></div>

    </div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-octave"><pre><span></span><span class="n">command</span> <span class="p">=</span> <span class="p">[</span><span class="n">working_directory</span> <span class="s">&#39;/software/QPerf/gadgetron_QPerf_mapping -f ./aif_stress -i ./data_stress -m ./MBF_stress --foot &#39;</span> <span class="n">num2str</span><span class="p">(</span><span class="n">foot</span><span class="p">)</span> <span class="s">&#39; --dt 500&#39;</span><span class="p">];</span>
<span class="nb">dos</span><span class="p">(</span><span class="n">command</span><span class="p">);</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="jb_output_wrapper }}">
<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>--------------Gagdgetron ND Array -------------

Array dimension is : 2

Array size is : 59 1 

Array data type is : float

Byte number for each element is : 4

Number of array size in bytes is : 236

Delete data on destruction flag is : 1



01-02 02:29:13.446 DEBUG [gadgetron_QPerf_mapping.cpp:75] cin_array = 7.11366

--------------Gagdgetron ND Array -------------

Array dimension is : 3

Array size is : 40 37 59 

Array data type is : float

Byte number for each element is : 4

Number of array size in bytes is : 349280

Delete data on destruction flag is : 1



01-02 02:29:13.450 DEBUG [gadgetron_QPerf_mapping.cpp:80] y_array = 149.444

01-02 02:29:13.450 DEBUG [gadgetron_QPerf_mapping.cpp:86] ==========================================================

01-02 02:29:47.535 DEBUG [GadgetronTimer.h:87] compute_BTEX20_model with HCT ... :34084.162500 ms

01-02 02:30:07.264 DEBUG [GadgetronTimer.h:87] PDE model solving ... :19509.644500 ms

01-02 02:30:07.273 DEBUG [GadgetronTimer.h:87] compute perfusion flow map ... :53822.342500 ms

01-02 02:30:07.293 DEBUG [gadgetron_QPerf_mapping.cpp:107] ==========================================================


</pre>
</div>
</div>
</div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-octave"><pre><span></span><span class="nb">graphics_toolkit</span><span class="p">(</span><span class="s">&#39;gnuplot&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-octave"><pre><span></span><span class="c">%plot gnuplot</span>
</pre></div>

    </div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-octave"><pre><span></span><span class="c">% load and visualize map</span>
<span class="n">fmap</span> <span class="p">=</span> <span class="n">analyze75read</span><span class="p">(</span><span class="s">&#39;MBF_stress.hdr&#39;</span><span class="p">);</span>
</pre></div>

    </div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-octave"><pre><span></span><span class="nb">figure</span><span class="p">;</span>
<span class="nb">plot</span><span class="p">(</span><span class="n">aif</span><span class="p">);</span>
<span class="nb">title</span><span class="p">(</span><span class="s">&#39;AIF&#39;</span><span class="p">);</span>
<span class="nb">figure</span><span class="p">;</span><span class="nb">imshow</span><span class="p">(</span><span class="n">fmap</span><span class="p">,</span> <span class="s">&#39;DisplayRange&#39;</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span> <span class="mi">6</span><span class="p">]);</span><span class="n">PerfColorMap</span><span class="p">;</span>
</pre></div>

    </div>
</div>
</div>

</div>
</div>

 


    </main>
    